if [ "${SHOW_TIMEOUT}" = "true" ]
then
	set default=0
	set timeout=10
fi

menuentry $"Start Lernstick" --class start --unrestricted {
	echo $"Loading Lernstick..."
	linux $DEFAULT_KERNEL $DEFAULT_APPEND locales=$LOCALES keyboard-layouts=$KEYBOARD desktop=$DESKTOP $LIVE_MEDIA $PERSISTENCE_MEDIA $PERSISTENCE $SWAP $SWAP_FILE $QUIET custom_options $CUSTOM_OPTIONS
	initrd $DEFAULT_INITRD
}

LANGUAGE_LABEL=$"Language       :"
LANGUAGE_VALUE=$"Unknown"
if   [ "${LOCALES}" = "de_CH.UTF-8" ]; then LANGUAGE_VALUE="Deutsch (Schweiz)"
elif [ "${LOCALES}" = "de_AT.UTF-8" ]; then LANGUAGE_VALUE="Deutsch (Österreich)"
elif [ "${LOCALES}" = "de_DE.UTF-8" ]; then LANGUAGE_VALUE="Deutsch (Deutschland)"
elif [ "${LOCALES}" = "fr_CH.UTF-8" ]; then LANGUAGE_VALUE="Français (Suisse)"
elif [ "${LOCALES}" = "it_CH.UTF-8" ]; then LANGUAGE_VALUE="Italiano (Svizzera)"
elif [ "${LOCALES}" = "en_US.UTF-8" ]; then LANGUAGE_VALUE="English (USA)"
elif [ "${LOCALES}" = "es_AR.UTF-8" ]; then LANGUAGE_VALUE="Español (Argentina)"
elif [ "${LOCALES}" = "es_ES.UTF-8" ]; then LANGUAGE_VALUE="Español (España)"
elif [ "${LOCALES}" = "pt_BR.UTF-8" ]; then LANGUAGE_VALUE="Português (Brasil)"
elif [ "${LOCALES}" = "ru_RU.UTF-8" ]; then LANGUAGE_VALUE="Русский"
elif [ "${LOCALES}" = "sq_AL.UTF-8" ]; then LANGUAGE_VALUE="Shqip"
fi
menuentry "${LANGUAGE_LABEL} ${LANGUAGE_VALUE}" --class locale --unrestricted {
	configfile "/boot/grub/grub_language.cfg"
}

KEYBOARD_LABEL=$"Keyboard       :"
KEYBOARD_VALUE=$"Unknown"
if   [ "${KEYBOARD}" = "ch,ch(fr),de,fr" ]; then KEYBOARD_VALUE=$"Switzerland (German)"
elif [ "${KEYBOARD}" = "ch(fr),ch,fr,de" ]; then KEYBOARD_VALUE=$"Switzerland (French)"
elif [ "${KEYBOARD}" = "de,ch,ch(fr),fr" ]; then KEYBOARD_VALUE=$"Germany"
elif [ "${KEYBOARD}" = "it,ch,ch(fr),fr" ]; then KEYBOARD_VALUE=$"Italy"
elif [ "${KEYBOARD}" = "us,ch,ch(fr),de" ]; then KEYBOARD_VALUE=$"USA"
elif [ "${KEYBOARD}" = "es,us,ch,ch(fr)" ]; then KEYBOARD_VALUE=$"Spain"
elif [ "${KEYBOARD}" = "br,pt,us,ch" ]    ; then KEYBOARD_VALUE=$"Brazil"
elif [ "${KEYBOARD}" = "ru,ch,de,us" ]    ; then KEYBOARD_VALUE=$"Russia"
elif [ "${KEYBOARD}" = "al,us,ch,de" ]    ; then KEYBOARD_VALUE=$"Albania"
fi
menuentry "${KEYBOARD_LABEL} ${KEYBOARD_VALUE}" --class keyboard --unrestricted {
	configfile "/boot/grub/grub_keyboard.cfg"
}

DESKTOP_LABEL=$"Desktop        :"
DESKTOP_VALUE=$"Unknown"
if   [ "${DESKTOP}" = "kde nottyautologin" ]          ; then DESKTOP_VALUE="KDE"
elif [ "${DESKTOP}" = "gnome nottyautologin" ]        ; then DESKTOP_VALUE="GNOME"
elif [ "${DESKTOP}" = "cinnamon nottyautologin" ]     ; then DESKTOP_VALUE="Cinnamon"
elif [ "${DESKTOP}" = "mate nottyautologin" ]         ; then DESKTOP_VALUE="MATE"
elif [ "${DESKTOP}" = "xfce nottyautologin" ]         ; then DESKTOP_VALUE="XFCE"
elif [ "${DESKTOP}" = "lxde nottyautologin" ]         ; then DESKTOP_VALUE="LXDE"
elif [ "${DESKTOP}" = "enlightenment nottyautologin" ]; then DESKTOP_VALUE="Enlightenment"
elif [ "${DESKTOP}" = "no" ]                          ; then DESKTOP_VALUE=$"Text console"
fi
menuentry "${DESKTOP_LABEL} ${DESKTOP_VALUE}" --class desktop --unrestricted {
	configfile "/boot/grub/grub_desktop.cfg"
}

LIVE_MEDIA_LABEL=$"Start medium   :"
LIVE_MEDIA_VALUE=$"Unknown"
if   [ "${LIVE_MEDIA}" = "" ]                                          ; then LIVE_MEDIA_VALUE=$"any"
elif [ "${LIVE_MEDIA}" = "live-media=removable live-media-timeout=10" ]; then LIVE_MEDIA_VALUE=$"removable device"
elif [ "${LIVE_MEDIA}" = "live-media=usb live-media-timeout=10" ]      ; then LIVE_MEDIA_VALUE=$"USB device"
fi
menuentry "${LIVE_MEDIA_LABEL} ${LIVE_MEDIA_VALUE}" --class media --unrestricted {
	configfile "/boot/grub/grub_live_media.cfg"
}

PERSISTENCE_MEDIA_LABEL=$"Data medium    :"
PERSISTENCE_MEDIA_VALUE=$"Unknown"
if   [ "${PERSISTENCE_MEDIA}" = "" ]                               ; then PERSISTENCE_MEDIA_VALUE=$"any"
elif [ "${PERSISTENCE_MEDIA}" = "persistence-media=removable" ]    ; then PERSISTENCE_MEDIA_VALUE=$"removable device"
elif [ "${PERSISTENCE_MEDIA}" = "persistence-media=removable-usb" ]; then PERSISTENCE_MEDIA_VALUE=$"USB device"
fi
menuentry "${PERSISTENCE_MEDIA_LABEL} ${PERSISTENCE_MEDIA_VALUE}" --class media --unrestricted {
	configfile "/boot/grub/grub_persistence_media.cfg"
}

PERSISTENCE_LABEL=$"Data partition :"
PERSISTENCE_VALUE=$"Unknown"
if   [ "${PERSISTENCE}" = "" ]                                 ; then PERSISTENCE_VALUE=$"not used"
elif [ "${PERSISTENCE}" = "persistence" ]                      ; then PERSISTENCE_VALUE=$"read-write"
elif [ "${PERSISTENCE}" = "persistence persistence-read-only" ]; then PERSISTENCE_VALUE=$"read-only"
fi
menuentry "${PERSISTENCE_LABEL} ${PERSISTENCE_VALUE}" --class partition --unrestricted {
	configfile "/boot/grub/grub_persistence.cfg"
}

quiet_label=$"Boot messages  :"
if [ "${QUIET}" = "" ]
then
	quiet_value=$"enabled"
else
	quiet_value=$"disabled"
fi
menuentry "${quiet_label} ${quiet_value}" --class quiet --unrestricted {
	configfile "/boot/grub/grub_quiet.cfg"
}
