# jessie32:
pbuilder --create --basetgz /var/cache/pbuilder/base-jessie32-bpo.tar.gz --distribution jessie --architecture i386 --othermirror "deb http://security.debian.org/ jessie/updates main|deb http://http.debian.net/debian jessie-backports main|deb http://packages.lernstick.ch/lernstick lernstick-8 main contrib non-free|deb http://packages.lernstick.ch/lernstick lernstick-8-backports main contrib non-free|deb http://packages.lernstick.ch/lernstick lernstick-8-thirdparty main contrib non-free|deb http://packages.lernstick.ch/lernstick lernstick-8-staging main contrib non-free|deb http://packages.lernstick.ch/lernstick lernstick-8-thirdparty-staging main contrib non-free|deb http://packages.lernstick.ch/lernstick lernstick-8-backports-staging main contrib non-free|deb file:///home/ronny/lernstick/backports/jessie/debs/unfinished ./" --bindmounts /home/ronny/lernstick/backports/jessie/debs --allow-untrusted

# jessie64:
pbuilder --create --basetgz /var/cache/pbuilder/base-jessie64-bpo.tar.gz --distribution jessie --architecture amd64 --othermirror "deb http://security.debian.org/ jessie/updates main|deb http://http.debian.net/debian jessie-backports main|deb file:///home/ronny/lernstick/backports/jessie/debs/unfinished ./|deb http://packages.lernstick.ch/lernstick lernstick-8-backports main contrib non-free" --bindmounts /home/ronny/lernstick/backports/jessie/debs --allow-untrusted

# stretch (64 Bit):
pbuilder --create --basetgz /var/cache/pbuilder/base-stretch-bpo.tar.gz --distribution stretch --othermirror "deb http://security.debian.org/ stretch/updates main|deb http://packages.lernstick.ch/lernstick lernstick-9-backports main contrib non-free|deb http://packages.lernstick.ch/lernstick lernstick-9-backports-staging main contrib non-free|deb http://packages.lernstick.ch/lernstick lernstick-9-thirdparty-staging main contrib non-free|deb http://packages.lernstick.ch/lernstick lernstick-9-staging main contrib non-free" --bindmounts /home/lernstick_debian9/lernstick/backports/stretch/debs --allow-untrusted

# Source-Paket der Software herunterladen
cat <<EOF > /etc/apt/sources.list.d/wheezy-src.list
deb-src http://ftp.ch.debian.org/debian/ wheezy main
EOF
apt-get update

# chroot aktualisieren
# (sollte nur sehr selten notwendig sein)
pbuilder --update --allow-untrusted --basetgz /var/cache/pbuilder/base-stretch-bpo.tar.gz --bindmounts /home/lernstick_debian9/lernstick/backports/stretch/debs

# Sourcen herunterladen und anpassen (damit es als Backport erkennbar wird)
apt-get source $PACKAGE
cd $PACKAGE-*
# debian/control: add new field
# Uploaders: Sylvain Beucler <beuc@beuc.net>
export DEBEMAIL="ronny.standtke@fhnw.ch" 
export DEBFULLNAME="Ronny Standtke"
export EDITOR="vim"
dch --bpo

# Sourcen in chroot übersetzen

# jessie64:
sudo pbuilder --login --basetgz /var/cache/pbuilder/base-jessie-bpo.tar.gz --bindmounts /home/ronny/lernstick/backports/jessie

# stretch (64 Bit)
sudo pbuilder --login --basetgz /var/cache/pbuilder/base-stretch-bpo.tar.gz --bindmounts /home/lernstick_debian9/lernstick/backports/stretch

# stretch (32 Bit)
sudo pbuilder --login --architecture i386 --basetgz /var/cache/pbuilder/base-stretch32-bpo.tar.gz --bindmounts /home/lernstick_debian9/lernstick/backports/stretch

cd /mnt/sda8/backports/$PACKAGE-*

# jessie
#apt-get update; apt-get upgrade; apt-get -t jessie-backports --yes --force-yes install pbuilder; apt-get --yes --force-yes install sudo devscripts fakeroot; /usr/lib/pbuilder/pbuilder-satisfydepends --continue-fail; export DEB_BUILD_OPTIONS=noddebs

# stretch
apt-get update; apt-get upgrade; apt-get --yes --force-yes install pbuilder; apt-get --yes --force-yes install sudo devscripts fakeroot; /usr/lib/pbuilder/pbuilder-satisfydepends --continue-fail

dpkg-buildpackage -sa

# Bei multiarch-Paketen (z.B. wine) muss das Paket sowohl in der 32-Bit als auch in der 64-Bit Version gebaut werden.
# Bei der ersten Version vollständig bauen und mit dput hochladen.
# Bei der zweiten Version nur noch das Binärpaket bauen:
dpkg-buildpackage -b

offizielle Backports testen:
Package: *
Pin: release a=stretch-backports
Pin-Priority: 999

